const cultures = [
  {
    nama: "Tari Kecak",
    asal: "Bali",
    provinsi: "Bali",
    gambar: "assets/image/kecak.jpg",
    clothing: {
      nama: "Kebaya Bali",
      image: "assets/image/qr1.png",
      description: "Pakaian adat Bali mencerminkan kekayaan budaya dan spiritualitas masyarakat Bali. Pakaian ini digunakan dalam berbagai upacara adat dan keagamaan, dengan ciri khas seperti udeng untuk pria dan kebaya untuk wanita. Setiap elemen pakaian memiliki makna simbolis, seperti kain poleng yang melambangkan keseimbangan, dan selendang yang menggambarkan kehormatan. Pakaian adat Bali tidak hanya mencerminkan estetika, tetapi juga mendalamkan hubungan masyarakat Bali dengan tradisi dan agama mereka. SCAN QR UNTUK MELIAT BENTUK BAJU"
    },
    steps: [
      {
        text: "Tari Kecak adalah salah satu tarian tradisional paling ikonik dari Bali yang menampilkan puluhan penari laki-laki duduk melingkar dengan ritme vokal 'cak cak cak' yang menghentak. Para penari tidak menggunakan alat musik, melainkan mengandalkan kekompakan suara dan gerakan tubuh untuk menciptakan suasana magis dan penuh semangat. Tarian ini sering dipentaskan menjelang senja di tempat terbuka, menciptakan pengalaman budaya yang mendalam bagi penonton.",
        image: "https://images.unsplash.com/photo-1511164657592-59a452023479?q=80&w=2070&auto=format&fit=crop",
      },
      {
        text: "Tarian ini berasal dari tradisi sakral Sanghyang, di mana penari berada dalam kondisi trans dan diyakini dirasuki roh. Pada tahun 1930-an, tari ini berkembang menjadi pertunjukan seni modern yang menggabungkan kisah Ramayana. Versi modern ini menghapus unsur trans, namun tetap mempertahankan aura mistis dan spiritual yang kuat melalui gerakan dan vokalisasi para penari.",
        image: "https://images.unsplash.com/photo-1702318192103-30ce1a291c53?q=80&w=1932&auto=format&fit=crop",
      },
      {
        text: "Dalam pementasan, Tari Kecak biasanya menggambarkan kisah pertempuran antara Rama dan Rahwana, bagian dari epos Ramayana. Penggunaan cahaya obor, ekspresi wajah, dan harmonisasi suara menjadikan pertunjukan ini dramatis dan menyentuh. Penonton diajak merasakan ketegangan dan keindahan kisah yang disampaikan tanpa dialog verbal, hanya dengan gerak dan suara yang menggema.",
        image: "https://images.unsplash.com/photo-1675956000201-5c42a62edf35?q=80&w=2070&auto=format&fit=crop",
      }
    ]
  },
  {
    nama: "Wayang Kulit",
    asal: "Jawa Tengah",
    provinsi: "Jawa Tengah",
    gambar: "assets/image/wayang.jpg",
    clothing: {
      nama: "Beskap dan Kebaya",
      image: "assets/image/jawa jawa jawa-marker.png",
      description: "Baju adat Jawa adalah pakaian tradisional masyarakat Jawa yang mencerminkan nilai kesopanan, keharmonisan, dan filosofi hidup. Untuk pria, pakaian adat terdiri dari beskap, jarik batik, blangkon, dan keris sebagai simbol kehormatan. Sementara wanita mengenakan kebaya, jarik batik, sanggul (konde), dan aksesori seperti bunga melati dan perhiasan, mencerminkan kelembutan dan keanggunan. Motif dan bentuk busana juga menunjukkan status sosial serta jenis acara, seperti pernikahan atau upacara adat. Keseluruhan busana ini menggambarkan budaya Jawa yang menjunjung tinggi tata krama, estetika, dan spiritualitas."
    },
    steps: [
      {
        text: "Wayang Kulit adalah seni pertunjukan tradisional dari Jawa yang menggunakan boneka kulit datar dan dimainkan di balik layar putih yang diterangi lampu. Pertunjukan ini tidak hanya menjadi hiburan rakyat, tetapi juga menjadi media penyampai nilai-nilai moral, spiritual, dan filosofis yang dalam, terutama dari cerita Mahabharata dan Ramayana.",
        image: "assets/image/wayang.jpg",
      },
      {
        text: "Dalam pertunjukan, layar putih disebut kelir dan lampu disebut blencong. Cahaya dari blencong memproyeksikan bayangan wayang ke kelir, menciptakan visual dramatis yang memukau. Penonton melihat bayangan karakter sambil mendengarkan kisah yang disuarakan oleh dalang, tokoh utama di balik panggung.",
        image: "https://jarwadi.me/wp-content/uploads/2012/06/dsc02484swk.jpg",
      },
      {
        text: "Dalang adalah sosok sentral dalam pertunjukan, memainkan semua tokoh, mengatur alur cerita, sekaligus mengendalikan alunan musik gamelan. Dalang harus menguasai seni vokal, filosofi, dan gerak wayang dengan baik, sehingga pertunjukan bisa berjalan lancar dan bermakna. Wayang Kulit telah diakui UNESCO sebagai Warisan Budaya Tak Benda dunia.",
        image: "https://images.unsplash.com/photo-1620409123739-3849e65df57a?q=80&w=2127&auto=format&fit=crop",
      }
    ]
  },
  {
    nama: "Rumah Gadang",
    asal: "Sumatera Barat",
    provinsi: "Sumatera Barat",
    gambar: "assets/image/gadang.jpg",
    clothing: {
      nama: "Baju Kurung dan Songket",
      image: "asset/image/gayo-marker (1).png",
      description: "Baju adat Gayo adalah pakaian tradisional suku Gayo dari dataran tinggi Aceh yang didominasi warna hitam sebagai simbol keteguhan dan wibawa. Busana pria terdiri dari baju lengan panjang, sarung songket, dan ikat kepala, sementara wanita mengenakan baju kerawang dengan bordiran warna-warni, kain songket, dan tudung berhias. Motif bordir (kerawang) mengandung makna filosofis tentang kehidupan, keseimbangan, dan hubungan manusia dengan alam. Secara keseluruhan, pakaian adat Gayo mencerminkan kehormatan, keindahan budaya, dan nilai-nilai adat yang dijunjung tinggi oleh masyarakatnya."
    },
    steps: [
      {
        text: "Rumah Gadang adalah rumah adat suku Minangkabau di Sumatera Barat yang mudah dikenali dari atapnya yang runcing menyerupai tanduk kerbau. Rumah ini bukan hanya tempat tinggal, tetapi juga simbol identitas sosial, status keluarga, dan warisan leluhur yang dilestarikan secara turun-temurun.",
        image: "assets/image/gadang.jpg",
      },
      {
        text: "Rumah ini mencerminkan sistem kekerabatan matrilineal yang dianut masyarakat Minang. Artinya, garis keturunan ditarik dari pihak ibu, dan rumah diwariskan kepada anak perempuan. Fungsi rumah pun beragam, dari tempat tinggal hingga lokasi pelaksanaan adat, musyawarah, dan acara keluarga besar.",
        image: "https://plus.unsplash.com/premium_photo-1673283243936-57acf471fc0e?q=80&w=1974&auto=format&fit=crop",
      },
      {
        text: "Tiap bagian rumah memiliki filosofi, mulai dari jumlah ruang, arah bangunan, hingga ukiran kayu yang kaya makna. Ukiran tersebut biasanya menggambarkan tumbuhan atau binatang dengan makna kehidupan, keuletan, dan kebijaksanaan. Rumah Gadang adalah contoh bagaimana arsitektur dan budaya berpadu secara harmonis.",
        image: "https://responradio.com/wp-content/uploads/2023/12/Mengungkap-Keunikan-dan-Asal-Usul-Rumah-Gadang.jpg",
      }
    ]
  },
  {
    nama: "Tenun Ikat Sumba",
    asal: "Nusa Tenggara Timur",
    provinsi: "Nusa Tenggara Timur",
    gambar: "https://cdn.shopify.com/s/files/1/0428/0965/5452/files/tenun_2.jpg?v=1691991176",
    clothing: {
      nama: "Pakaian Adat Sumba",
      image: "asset/image/sumbawa.png",
      description: "Baju adat Sumbawa merupakan pakaian tradisional masyarakat Sumbawa, Nusa Tenggara Barat, yang mencerminkan kebesaran, adat istiadat, dan status sosial. Pria memakai latung (baju lengan panjang), kain songket, dan ikat kepala (sapuq), sementara wanita mengenakan kebaya khas dengan kain songket, serta hiasan kepala dan perhiasan emas. Warna dan motif kain songket melambangkan kemuliaan, keanggunan, serta identitas budaya Sumbawa."
    },
    steps: [
      {
        text: "Tenun Ikat Sumba adalah kain tradisional khas Nusa Tenggara Timur yang dibuat dengan teknik pewarnaan benang sebelum ditenun. Proses ini sangat unik dan kompleks karena motif dibuat terlebih dahulu dengan mengikat dan mewarnai benang secara bertahap sesuai desain yang diinginkan.",
        image: "https://cdn.shopify.com/s/files/1/0428/0965/5452/files/tenun_2.jpg?v=1691991176",
      },
      {
        text: "Proses pembuatan kain ini bisa memakan waktu berminggu-minggu hingga berbulan-bulan. Benang diikat dengan tali serat alam agar sebagian tidak terkena warna saat dicelup. Proses ini diulang untuk menciptakan pola yang rumit, menunjukkan keahlian dan ketelatenan penenun yang luar biasa.",
        image: "https://asset.kompas.com/crops/GGN6TBuc5k9takrEILJke_sx3H8=/0x0:1000x667/1200x800/data/photo/2018/05/30/822670728.jpg",
      },
      {
        text: "Motif Tenun Sumba sangat kaya simbol, mencerminkan hubungan manusia dengan alam, leluhur, dan nilai-nilai spiritual. Kain ini biasa digunakan dalam upacara adat, seperti pernikahan atau kematian, dan menjadi simbol status sosial. Warna dan coraknya yang khas menjadikan kain ini sangat bernilai secara budaya maupun ekonomi.",
        image: "https://cdn.shopify.com/s/files/1/0428/0965/5452/files/tenun_3.jpg?v=1691991205",
      }
    ]
  }
];

// Group cultures by province
const groupedByProvince = cultures.reduce((groups, culture) => {
  const { provinsi } = culture;
  if (!groups[provinsi]) {
    groups[provinsi] = [];
  }
  groups[provinsi].push(culture);
  return groups;
}, {});

const listEl = document.getElementById("culture-list");
const detailEl = document.getElementById("culture-detail");

// Function to display cultures by province
function displayCulturesByProvince() {
  listEl.innerHTML = ''; // Clear previous content

  Object.keys(groupedByProvince).forEach(province => {
    const provinceEl = document.createElement("div");
    provinceEl.classList.add("province");

    const provinceTitle = document.createElement("h2");
    provinceTitle.textContent = province;
    provinceEl.appendChild(provinceTitle);

    groupedByProvince[province].forEach(culture => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${culture.gambar}" alt="${culture.nama}" />
        <div class="card-content">
          <h3>${culture.nama}</h3>
          <p>${culture.asal}</p>
        </div>
      `;
      card.onclick = () => showDetail(cultures.indexOf(culture), 0);
      provinceEl.appendChild(card);
    });

    listEl.appendChild(provinceEl);
  });
}

let currentIndex = 0;
let currentStep = 0;

// Show details of a culture step; clothing only for first step
function showDetail(index, step) {
  const data = cultures[index];
  const stepData = data.steps[step];
  currentIndex = index;
  currentStep = step;

  detailEl.classList.remove("hidden");
  listEl.style.display = "none";

  setTimeout(() => {
    detailEl.classList.add("show");
  }, 10);

  let clothingHtml = '';
  if (step === 0) {
    clothingHtml = `
      <h3>Pakaian Adat</h3>
      <img src="${data.clothing.image}" alt="${data.clothing.nama}" style="max-width:200px; display:block; margin-bottom:0.5rem;" />
      <p><strong>${data.clothing.nama}:</strong> ${data.clothing.description}</p>
    `;
  }

  detailEl.innerHTML = `
    <h2>${data.nama}</h2>
    <p><strong>Asal:</strong> ${data.asal}</p>
    <img src="${stepData.image}" alt="Step ${step+1} ${data.nama}" />
    <p>${stepData.text}</p>
    ${clothingHtml}
    <div class="step-indicator">Langkah ${step+1} dari ${data.steps.length}</div>
    <div class="button-group">
      <button onclick="prevStep()">← Sebelumnya</button>
      ${step < data.steps.length - 1
        ? `<button onclick="nextStep()">Selanjutnya →</button>`
        : `<button onclick="hideDetail()">Selesai</button>`}
    </div>
    <div style="margin-top:1rem;">
      <button onclick="goHome()" style="background:#ccc;padding:10px 15px;border:none;border-radius:6px;cursor:pointer;">🏠 Kembali ke Beranda</button>
    </div>
  `;
}

function nextStep() {
  if (currentStep < cultures[currentIndex].steps.length - 1) {
    currentStep++;
    showDetail(currentIndex, currentStep);
  }
}

function prevStep() {
  if (currentStep > 0) {
    currentStep--;
    showDetail(currentIndex, currentStep);
  }
}

function hideDetail() {
  detailEl.classList.remove("show");
  setTimeout(() => {
    listEl.style.display = "grid";
    detailEl.classList.add("hidden");
  }, 300);
}

function goHome() {
  hideDetail();
  displayCulturesByProvince();
}

// Initialize the display
displayCulturesByProvince();
